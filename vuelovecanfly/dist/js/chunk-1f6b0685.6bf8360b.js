(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f6b0685"],{"1fd5":function(e,t,a){},"40d7":function(e,t,a){"use strict";var i=a("1fd5"),n=a.n(i);n.a},fc31:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"container",staticStyle:{padding:"15px 30px"}},[a("div",{staticClass:"handle-box"},[a("el-row",{staticStyle:{"margin-bottom":"15px",width:"100%"}},[this.$store.getters.isAdmin?a("el-switch",{staticStyle:{display:"inline-block","font-size":"12px",float:"right"},attrs:{"active-text":"开启管理员模式","active-color":"#13ce66","inactive-color":"#d5dce6"},on:{change:e.getCategories},model:{value:e.enableAdmin,callback:function(t){e.enableAdmin=t},expression:"enableAdmin"}}):e._e()],1),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{xs:8,sm:8,md:8,lg:8,xl:8}},[a("div",{staticClass:"container-self"},[a("div",{staticClass:"form-header"},[a("p",[e._v("添加分类")])]),a("div",{staticClass:"form-body"},[a("p",{staticClass:"pText"},[e._v("名称*：")]),a("el-input",{staticClass:"input-d mr",attrs:{placeholder:"请输入分类名称"},model:{value:e.categoryName,callback:function(t){e.categoryName=t},expression:"categoryName"}}),a("p",{staticClass:"pText"},[e._v("描述：")]),a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入描述信息",maxlength:"150","show-word-limit":""},model:{value:e.categoryDescribe,callback:function(t){e.categoryDescribe=t},expression:"categoryDescribe"}}),a("div",{staticStyle:{"margin-top":"20px"}},[e.edit?a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSave()}}},[e._v("更新")]),a("el-button",{attrs:{type:"info",plain:""},on:{click:e.handleCancer}},[e._v("取消修改")])],1):a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSave()}}},[e._v("保存")])],1)])],1)])]),a("el-col",{attrs:{xs:16,sm:16,md:16,lg:16,xl:16}},[a("div",{staticClass:"container-self"},[a("div",{staticClass:"form-header"},[a("p",{staticStyle:{display:"inline-block"}},[e._v("分类列表 "),a("el-select",{staticClass:"select-self",attrs:{placeholder:"文章位置"},on:{change:e.changeStatus},model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}},[a("el-option",{key:"-1",attrs:{label:"全部文章",value:-1}}),a("el-option",{key:"1",attrs:{label:"已发布",value:1}}),a("el-option",{key:"0",attrs:{label:"回收站",value:0}}),a("el-option",{key:"2",attrs:{label:"草稿箱",value:2}})],1)],1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"info",plain:""},on:{click:e.handleClear}},[e._v("重置")])],1),a("div",{staticClass:"form-body"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.categories,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"categoryName",label:"类名",align:"center"}}),a("el-table-column",{attrs:{label:"文章数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"warning"}},[e._v(" "+e._s(t.row.articleNums)+" ")])]}}])}),e.enableAdmin?a("el-table-column",{attrs:{label:"所属用户",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"light",placement:"right-end"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("UID:"+e._s(t.row.userId)+" ")]),a("el-button",{staticStyle:{color:"#6ffcff"},attrs:{type:"text",icon:"el-icon-user",size:"mini"},on:{click:function(a){return e.selectByUserId(t.row.userId)}}},[e._v(e._s(t.row.nickname)+" ")])],1)]}}],null,!1,2371404848)}):e._e(),a("el-table-column",{attrs:{prop:"categoryDescribe",label:"描述",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改 ")]),-1==e.query.status&&0==t.row.articleNums?a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除 ")]):e._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.curPage,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1)])])],1)],1)])])])},n=[],r=a("eeb9"),s={name:"Category",data:function(){return{categoryId:-1,categoryName:"",categoryDescribe:"",categories:[],query:{curPage:1,pageSize:10,status:-1},pageTotal:-1,loading:!1,edit:!1,enableAdmin:!1,adminSelectUserId:-1}},created:function(){this.getCategories()},methods:{getCategories:function(){var e=this;this.loading=!0,Object(r["b"])(this.enableAdmin?"/admin/all/category/?userId="+this.adminSelectUserId+"&":"/category/all",this.query).then((function(t){200==t.status?(e.loading=!1,e.categories=t.data.list,e.pageTotal=t.data.total):e.loading=!1}),(function(t){e.loading=!1})).catch((function(t){e.loading=!1}))},selectByUserId:function(e){this.adminSelectUserId=e,this.getCategories()},handleClear:function(){this.query.curPage=1,this.query.status=-1,this.adminSelectUserId=-1,this.getCategories()},changeStatus:function(){this.query.curPage=1,this.getCategories()},handlePageChange:function(e){this.$set(this.query,"curPage",e),this.getCategories()},handleSave:function(){var e=this;if(-1!=this.categoryId)Object(r["d"])("/category/",{categoryId:this.categoryId,categoryName:this.categoryName,categoryDescribe:this.categoryDescribe}).then((function(t){200==t.status&&(e.getCategories(),e.categoryId=-1,e.categoryName="",e.categoryDescribe="",e.edit=!1)}));else{if(this.enableAdmin)return this.$message.error("管理员模式下无法添加分类哦"),this.categoryName="",this.categoryDescribe="",!1;Object(r["c"])("/category/",{categoryName:this.categoryName,categoryDescribe:this.categoryDescribe}).then((function(t){200==t.status&&(e.getCategories(),e.categoryName="",e.categoryDescribe="")}))}},handleEdit:function(e,t){this.categoryId=t.categoryId,this.categoryName=t.categoryName,this.categoryDescribe=t.categoryDescribe,this.edit=!0},handleCancer:function(){this.categoryId=-1,this.categoryName="",this.categoryDescribe="",this.edit=!1},handleDelete:function(e,t){var a=this;this.$confirm("删除此分类，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["a"])("/category/",{categoryId:t.categoryId}).then((function(e){200==e.status&&a.getCategories()}))}))}}},c=s,l=(a("40d7"),a("2877")),o=Object(l["a"])(c,i,n,!1,null,"333eb0bc",null);t["default"]=o.exports}}]);
//# sourceMappingURL=chunk-1f6b0685.6bf8360b.js.map