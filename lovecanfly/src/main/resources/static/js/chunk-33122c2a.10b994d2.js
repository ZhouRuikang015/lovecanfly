(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33122c2a"],{1102:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"container"},[n("div",{staticClass:"handle-box"},[n("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"通过文章标题搜索"},model:{value:t.query.titleKeyword,callback:function(e){t.$set(t.query,"titleKeyword",e)},expression:"query.titleKeyword"}}),n("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"通过评论搜索"},model:{value:t.query.contentKeyword,callback:function(e){t.$set(t.query,"contentKeyword",e)},expression:"query.contentKeyword"}}),n("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"评论状态"},on:{change:t.changeSelection},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}},[n("el-option",{key:"-1",attrs:{label:"全部评论",value:-1}}),n("el-option",{key:"1",attrs:{label:"已发布",value:1}}),n("el-option",{key:"2",attrs:{label:"待审核",value:2}}),n("el-option",{key:"0",attrs:{label:"回收站",value:0}})],1),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),n("el-button",{attrs:{type:"info",plain:""},on:{click:t.handleClear}},[t._v("重置")]),this.$store.getters.isAdmin?n("el-switch",{staticStyle:{display:"inline-block","font-size":"12px",float:"right"},attrs:{"active-text":"开启管理员模式","active-color":"#13ce66","inactive-color":"#d5dce6"},on:{change:t.getComments},model:{value:t.enableAdmin,callback:function(e){t.enableAdmin=e},expression:"enableAdmin"}}):t._e()],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:t.comments,border:"","header-cell-class-name":"table-header"}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"commentatorName",label:"昵称",width:"100",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{attrs:{effect:"light",placement:"right-end"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v("name:"+t._s(e.row.commentatorName)),n("br"),t._v(" email:"+t._s(e.row.commentatorEmail)),n("br"),t._v(" location:"+t._s(e.row.commentatorLocation)+" ")]),n("el-button",{attrs:{type:"text",icon:"el-icon-user"}},[t._v(t._s(e.row.commentatorName))])],1)]}}])}),n("el-table-column",{attrs:{prop:"commentContent",label:"内容",align:"center"}}),n("el-table-column",{attrs:{label:"状态",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:1===e.row.status?"success":0===e.row.status?"danger":"warning"}},[t._v(" "+t._s(1===e.row.status?"已发布":0===e.row.status?"回收站":"待审核")+" ")])]}}])}),n("el-table-column",{attrs:{prop:"title",label:"评论文章",align:"center"}}),t.enableAdmin?n("el-table-column",{attrs:{label:"文章作者",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{attrs:{effect:"light",placement:"right-end"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v("UID:"+t._s(e.row.userId)+" ")]),n("el-button",{staticStyle:{color:"#6ffcff"},attrs:{type:"text",icon:"el-icon-user",size:"mini"},on:{click:function(n){return t.selectByUserId(e.row.userId)}}},[t._v(t._s(e.row.nickname)+" ")])],1)]}}],null,!1,2371404848)}):t._e(),n("el-table-column",{attrs:{prop:"commentCreateTime",label:"评论时间",align:"center"}}),n("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v(t._s(2==e.row.status?"通过":0==e.row.status?"还原":""!=e.row.replyContent?"查看回复":"回复")+" ")]),n("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v(t._s(0!=e.row.status?"回收站":"删除")+" ")])]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{staticStyle:{display:"inline-block",padding:"0px"},attrs:{background:"",layout:"total, prev, pager, next","current-page":t.query.curPage,"page-size":t.query.pageSize,total:t.pageTotal},on:{"current-change":t.handlePageChange}}),n("el-select",{staticClass:"handle-select",attrs:{placeholder:"评论状态"},on:{change:t.changeSelection},model:{value:t.query.pageSize,callback:function(e){t.$set(t.query,"pageSize",e)},expression:"query.pageSize"}},[n("el-option",{key:"0",attrs:{label:"5条/页",value:5}}),n("el-option",{key:"1",attrs:{label:"7条/页",value:7}}),n("el-option",{key:"2",attrs:{label:"10条/页",value:10}}),n("el-option",{key:"3",attrs:{label:"20条/页",value:20}}),n("el-option",{key:"4",attrs:{label:"50条/页",value:50}})],1)],1),n("el-dialog",{attrs:{title:"回复："+t.commentatorName,visible:t.edit,width:"30%"},on:{"update:visible":function(e){t.edit=e}}},[n("el-input",{attrs:{type:"textarea",rows:8,placeholder:"",maxlength:"150","show-word-limit":""},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}}),t.needEdit?n("p",{staticStyle:{"margin-top":"20px","text-align":"right"}},[t._v(t._s("回复于："+t.replyCreateTime))]):t._e(),n("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"info",plain:""},on:{click:function(e){t.replyContent=""}}},[t._v("重 置")]),n("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v(t._s(t.needEdit?"修 改":"确 定"))])],1)],1)])},l=[],o=n("eeb9"),s=n("4f39"),i={name:"Comment",data:function(){return{query:{titleKeyword:"",contentKeyword:"",status:-1,curPage:1,pageSize:7},comments:[],loading:!1,pageTotal:0,edit:!1,needEdit:!1,commentatorName:"",replyContent:"",replyCreateTime:"",enableAdmin:!1,adminSelectUserId:-1}},created:function(){this.getComments()},methods:{getComments:function(){var t=this;this.loading=!0,Object(o["b"])(this.enableAdmin?"/admin/all/comment/?userId="+this.adminSelectUserId+"&":"/comment/all",this.query).then((function(e){t.loading=!1,200==e.status&&(t.comments=e.data.list,t.pageTotal=e.data.total)}),(function(e){t.loading=!1})).catch((function(e){t.loading=!1,t.$message.error("操作失败")}))},handleSearch:function(){this.query.curPage=1,this.getComments()},selectByUserId:function(t){this.adminSelectUserId=t,this.getComments()},handleClear:function(){this.query.titleKeyword="",this.query.contentKeyword="",this.query.status=-1,this.query.curPage=1,this.adminSelectUserId=-1,this.getComments()},changeSelection:function(){this.query.curPage=1,this.getComments()},handlePageChange:function(t){this.$set(this.query,"curPage",t),this.getComments()},handleEdit:function(t,e){1!=e.status?this.changeStatus(e.commentId,1):(this.edit=!0,e.replyContent?(this.needEdit=!0,this.replyCreateTime=Object(s["a"])(e.replyCreateTime),this.replyContent=e.replyContent):(this.replyContent="",this.needEdit=!1),this.commentId=e.commentId,this.commentatorName=e.commentatorName)},saveEdit:function(){var t=this;Object(o["d"])("/comment/reply/",{commentId:this.commentId,replyContent:this.replyContent}).then((function(e){200==e.status&&"success"==e.data.status&&(t.edit=!1,t.replyContent="",t.getComments())}))},handleDelete:function(t,e){var n=this;0==e.status?Object(o["a"])("/comment/",{commentId:e.commentId}).then((function(t){200==t.status&&"success"==t.data.status&&n.getComments()})):this.changeStatus(e.commentId,0)},changeStatus:function(t,e){var n=this;Object(o["d"])("/comment/status",{commentId:t,status:e}).then((function(t){200==t.status&&"success"==t.data.status&&n.getComments()}))}}},r=i,c=(n("6a07"),n("2877")),u=Object(c["a"])(r,a,l,!1,null,"e03cbcf4",null);e["default"]=u.exports},"6a07":function(t,e,n){"use strict";var a=n("9691"),l=n.n(a);l.a},9691:function(t,e,n){}}]);
//# sourceMappingURL=chunk-33122c2a.10b994d2.js.map