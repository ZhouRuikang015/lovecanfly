(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34e38b00"],{"604a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{padding:"0px 30px"}},[a("div",[a("el-row",{staticStyle:{height:"40px",padding:"10px 0px"}},[this.$store.getters.isAdmin?a("el-switch",{staticStyle:{display:"inline-block","font-size":"12px",float:"right"},attrs:{"active-text":"开启管理员模式","active-color":"#13ce66","inactive-color":"#d5dce6"},on:{change:t.init},model:{value:t.enableAdmin,callback:function(e){t.enableAdmin=e},expression:"enableAdmin"}}):t._e()],1),a("div",{staticClass:"dashboard-box"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"col-box",attrs:{xs:12,sm:12,md:12,lg:6,xl:6}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("文章")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0","font-size":"15px"},attrs:{icon:"el-icon-connection",type:"text"},on:{click:t.toArticle}})],1),a("div",{staticClass:"text"},[a("h5",{directives:[{name:"loading",rawName:"v-loading",value:t.loading1,expression:"loading1"}]},[t._v(t._s(t.articlesCount))])])])],1),a("el-col",{staticClass:"col-box",attrs:{xs:12,sm:12,md:12,lg:6,xl:6}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("分类")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0","font-size":"15px"},attrs:{icon:"el-icon-connection",type:"text"},on:{click:t.toCategory}})],1),a("div",{staticClass:"text"},[a("h5",{directives:[{name:"loading",rawName:"v-loading",value:t.loading2,expression:"loading2"}]},[t._v(t._s(t.categoriesCount))])])])],1),a("el-col",{staticClass:"col-box",attrs:{xs:12,sm:12,md:12,lg:6,xl:6}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("评论")]),a("el-badge",{staticStyle:{float:"right"},attrs:{"is-dot":t.dot}},[a("el-button",{staticStyle:{float:"right",padding:"3px 0","font-size":"15px"},attrs:{icon:"el-icon-connection",type:"text"},on:{click:t.toComment}})],1)],1),a("div",{staticClass:"text"},[a("h5",{directives:[{name:"loading",rawName:"v-loading",value:t.loading1,expression:"loading1"}]},[t._v(t._s(t.commentsCount))])])])],1),a("el-col",{staticClass:"col-box",attrs:{xs:12,sm:12,md:12,lg:6,xl:6}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("浏览量")]),a("el-tooltip",{attrs:{effect:"light",placement:"left"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 新增访问量:"+t._s(t.newViews)+"噢~ ")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0","font-size":"15px"},attrs:{icon:"el-icon-zoom-in",type:"text"}})],1)],1),a("div",{staticClass:"text"},[a("h5",{directives:[{name:"loading",rawName:"v-loading",value:t.loading1,expression:"loading1"}]},[t._v(t._s(t.viewsCount))])])])],1)],1),a("el-row",{attrs:{gutter:20}},[t.enableAdmin?a("el-col",{staticClass:"col-box",attrs:{xs:24,sm:24,md:24,lg:15,xl:15}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading2,expression:"loading2"}],staticStyle:{"background-color":"#ffffff",padding:"40px","border-radius":"5px"}},[a("p",{staticStyle:{"text-align":"left"}},[t._v("最近一周：")]),a("ve-histogram",{attrs:{data:t.chartData,settings:t.chartSettings,height:"280px","before-config":t.beforeConfig}})],1)]):a("el-col",{staticClass:"col-box",attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.loading2,expression:"loading2"}]},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v(" 新动态")]),a("p",{staticStyle:{"margin-top":"10px"}},[t._v("距离上一次登录： "+t._s(t.lastLoginTime))]),a("p",{staticStyle:{margin:"20px 30px"}},[t._v("新增评论 "),a("el-tag",{attrs:{type:"danger"}},[t._v(" "+t._s(t.newComments)+" ")]),t._v(" 条 ")],1),a("p",{staticStyle:{margin:"20px 30px"}},[t._v("新增访问量 "),a("el-tag",{attrs:{type:"warning"}},[t._v(" "+t._s(t.newViews)+" ")]),t._v(" 位 ")],1)])],1)],1)],1)],1)],1)])},n=[],o=(a("4160"),a("ac1f"),a("1276"),a("159b"),a("eeb9")),s={name:"Dashboard",data:function(){return{articlesCount:0,categoriesCount:0,commentsCount:0,viewsCount:0,lastLoginTime:"",newComments:0,newViews:0,loading1:!1,loading2:!1,chartSettings:{axisSite:{right:["新浏览量"]},yAxisType:["normal","normal"],min:[0,0]},chartData:{columns:["recordCreateTime","newComments","newViews"],rows:[]},enableAdmin:!1}},computed:{dot:function(){return this.newComments>0}},created:function(){this.init()},methods:{init:function(){this.getDashboard(),this.getRecords()},getDashboard:function(){var t=this;this.loading1=!0,Object(o["b"])(this.enableAdmin?"/admin/dashboardCount":"/article/dashboardCount").then((function(e){if(t.loading1=!1,200==e.status){var a=e.data;t.articlesCount=a.articlesCount,t.categoriesCount=a.categoriesCount,t.commentsCount=a.commentsCount,t.viewsCount=a.viewsCount}}),(function(e){t.loading1=!1})).catch((function(e){t.loading1=!1,t.$message.error("操作失败")}))},getRecords:function(){var t=this;this.loading2=!0,Object(o["b"])(this.enableAdmin?"/admin/scheduleRecords":"/record").then((function(e){if(t.loading2=!1,200==e.status){var a=e.data;t.enableAdmin?t.chartData.rows=e.data.reverse():(t.lastLoginTime=a.recordCreateTime,t.newComments=a.newComments,t.newViews=a.newViews)}}),(function(e){t.loading2=!1})).catch((function(e){t.loading2=!1,t.$message.error("请求数据失败")}))},beforeConfig:function(t){t.rows.forEach((function(t,e){t.recordCreateTime=t.recordCreateTime.split(" ")[0]}))},toCategory:function(){this.$router.push("/manage/category")},toArticle:function(){this.$router.push("/manage/article")},toComment:function(){this.$router.push("/manage/comment")}}},l=s,r=(a("ef52"),a("2877")),c=Object(r["a"])(l,i,n,!1,null,"5ac67ab5",null);e["default"]=c.exports},7652:function(t,e,a){},ef52:function(t,e,a){"use strict";var i=a("7652"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-34e38b00.67def6df.js.map