(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f2a7884"],{"0683":function(t,e,s){},4025:function(t,e,s){"use strict";var n=s("0683"),a=s.n(n);a.a},"469d":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"user-manager-body"},[s("el-row",{staticStyle:{"margin-bottom":"10px"}},[s("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[s("el-radio-group",{staticStyle:{"margin-right":"40px","text-align":"left"},on:{change:function(e){return t.getUsers()}},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}},[s("el-radio",{attrs:{label:1}},[t._v("已注册")]),s("el-radio",{attrs:{label:2}},[t._v("待审核")])],1),s("el-input",{staticClass:"input-body",attrs:{placeholder:"通过用户昵称搜索"},model:{value:t.query.nicknameKeyword,callback:function(e){t.$set(t.query,"nicknameKeyword",e)},expression:"query.nicknameKeyword"}}),s("el-button",{staticStyle:{display:"inline-block"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.getUsers()}}},[t._v("搜索 ")])],1)],1),s("el-row",{attrs:{gutter:20}},t._l(t.users,(function(e,n){return s("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.singleLoadings[n],expression:"singleLoadings[index]"}],key:e.username,staticStyle:{"margin-bottom":"20px"},attrs:{xs:12,sm:12,md:12,lg:6,xl:6}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v(t._s(e.nickname))]),s("el-button",{staticClass:"delete-button",attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(s){return t.handleDelete(e.userId)}}},[t._v("删除 ")])],1),s("div",{staticClass:"form-body"},[s("p",{staticClass:"pText"},[t._v("用户名："+t._s(e.username))]),s("p",{staticClass:"pText"},[t._v("性别："+t._s(1==e.gender?"男":"女"))]),s("p",{staticClass:"pText"},[t._v("邮箱："+t._s(e.email))]),s("p",{staticClass:"pText"},[t._v("注册时间："+t._s(e.registerTime))]),2!=t.query.status?s("div",[s("div",{staticStyle:{"margin-bottom":"15px"}},[s("p",{staticClass:"pText",staticStyle:{display:"inline"}},[t._v(" 状态： ")]),s("el-switch",{staticStyle:{display:"inline-block","font-size":"12px"},attrs:{"active-text":"启用","inactive-text":"封禁","active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(s){return t.changeStatus(e.userId,e.status,n,!1)}},model:{value:e.status,callback:function(s){t.$set(e,"status",s)},expression:"user.status"}})],1),s("div",{staticStyle:{"margin-bottom":"15px"}},[s("p",{staticClass:"pText",staticStyle:{display:"inline"}},[t._v(" 角色： ")]),t._l(e.roles,(function(e,n){return s("el-tag",{key:e.roleId,staticClass:"fa fa-user",staticStyle:{margin:"0px 2px"},attrs:{type:t.tagType[e.roleId-1],size:"mini"}},[t._v(" "+t._s(e.roleNameZh)+" ")])})),s("el-popover",{attrs:{placement:"right-end",width:"160"},on:{hide:function(s){return t.changeRoles(t.roleIds,e.userId,n)}}},[s("p",{staticClass:"pText"},[t._v("更改角色")]),s("el-select",{attrs:{multiple:"",placeholder:"请选择",size:"mini"},model:{value:t.roleIds,callback:function(e){t.roleIds=e},expression:"roleIds"}},t._l(t.allRoles,(function(t,e){return s("el-option",{key:t.roleId,attrs:{label:t.roleNameZh,value:t.roleId}})})),1),s("el-button",{staticStyle:{color:"#f07724"},attrs:{slot:"reference",type:"text",size:"mini",icon:"fa fa-plus-square"},on:{click:function(s){return t.showRoleIds(e.roles)}},slot:"reference"})],1)],2)]):s("div",[s("el-button",{attrs:{type:"warning",icon:"fa fa-futbol-o"},on:{click:function(s){return t.changeStatus(e.userId,1,n,!0)}}},[t._v(" 审核通过 ")])],1)])])],1)})),1)],1)])},a=[],i=(s("4160"),s("d81d"),s("a434"),s("159b"),s("eeb9")),l={name:"UserManager",data:function(){return{query:{nicknameKeyword:"",status:1,curPage:1,pageSize:12},loading:!1,singleLoadings:[],users:[],tagType:["danger","success","warning","primary"],allRoles:[],roleIds:[]}},created:function(){this.singleLoadings=Array.apply(null,Array(12)).map((function(t,e){return!1})),this.getUsers(),this.getAllRoles()},methods:{getUsers:function(){var t=this;this.loading=!0,Object(i["b"])("/admin/user/all",this.query).then((function(e){t.loading=!1,200==e.status&&(t.users=e.data.list)}),(function(e){t.loading=!1})).catch((function(e){t.loading=!1}))},getAllRoles:function(){var t=this;Object(i["b"])("/admin/role/all").then((function(e){200==e.status&&(t.allRoles=e.data)}))},changeStatus:function(t,e,s,n){var a=this;this.singleLoadings.splice(s,1,!0),Object(i["d"])("/admin/user/status",{userId:t,status:e,isNewUser:n}).then((function(t){200==t.status&&(a.singleLoadings.splice(s,1,!1),a.getUsers())}))},handleDelete:function(t){var e=this;this.$confirm("删除该用户，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$confirm("该用户下的所有文章、分类、评论均会被删除，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){Object(i["a"])("/admin/user/"+t).then((function(t){200==t.status&&e.getUsers()}))}))}))},showRoleIds:function(t){var e=this;this.roleIds=[],t.forEach((function(t,s){e.roleIds.push(t.roleId)}))},changeRoles:function(t,e,s){var n=this;if(0==t.length)return this.$message.error("角色不可为空"),!1;Object(i["d"])("/admin/user/roles",{roleIds:t,userId:e}).then((function(t){200==t.status&&n.getUserByUserId(e,s)}))},getUserByUserId:function(t,e){var s=this;this.singleLoadings.splice(e,1,!0),Object(i["b"])("/admin/user/"+t).then((function(t){200==t.status&&(s.singleLoadings.splice(e,1,!1),s.users.splice(e,1,t.data))}))}}},r=l,o=(s("4025"),s("2877")),c=Object(o["a"])(r,n,a,!1,null,"b46c175e",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-0f2a7884.f5df78bc.js.map